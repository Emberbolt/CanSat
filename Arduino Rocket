/*
Peddit Rocket Version 0.31
Kaj Streelder - Daniel Bargeman - Valentijn Leenaers - Lorenzo Daidone - Bryan Lesage
Arduino Super Micro

SHORTCUTS
PS = Pressure Sensor
TS = Temperature Sensor
LS = Light Sensor
TR = Transmitter
S = Servo <-> PAS = Parachute Servo 
*/

int TS = 2;
int PS = 3;
int LS = 4;
int S = 5;
int TR = 6;

#include <Servo.h>
Servo PAS;

void setup()
{
    pinMode(PS, INPUT);
    pinMode(TS, INPUT);
    pinMode(S, OUTPUT);
    PAS.attach(3);
    pinMode(TR, OUTPUT);
    
    Serial.begin(9600);
}

void loop()
{
    START:
    
    // TEMPERATURE SENSOR
    int reading = analogRead(TS);
    float voltage = reading * 5.0;
    voltage /= 1024.00;
    Serial.print(voltage); 
    Serial.println("volt");
    
    // TEMPERATURE IN CELCIUS
    float Temperature_Celcius = (voltage - 0.5) * 100;
    Serial.print(Temperature_Celcius); 
    Serial.println("Degrees Celcius");
    
    // TEMPERATURE IN FAHRENHEIT 
    float Temperature_Fahrenheit = (Temperature_Celcius * 9 / 5) + 32.00;
    Serial.print(Temperature_Fahrenheit);
    Serial.println("Degrees Fahrenheit");
    
    // PRESSURE SENSOR
    int Reading2 = analogRead(PS);
    float pressure = ((Reading2 / 1024.00) + 0.095) / 0.0009;
    Serial.print("Pressure = ");
    Serial.println("millibars");
    
    //LIGHT SENSOR
    int Reading3 = analogRead(LS);
    float Light_Sensor = Reading3;
    Serial.print(Light_Sensor);
    Serial.println("Lumen");
    if (analogRead(LS) > 500)
        { goto START; }
    else 
        { goto SERVO; }
        
    //SERVO
    SERVO:
    int pos = 0;
    for (pos = 0; pos <=180; pos += 1);
    PAS.write(pos);

    //TRANSMITTER
    
    delay(1000);
}
